<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Discount Calculator</title>
<style>
    body {
        font-family: Arial, sans-serif;
        padding: 20px;
    }
    .item {
        margin-bottom: 10px;
    }
    button {
        padding: 5px 10px;
        cursor: pointer;
    }
</style>
</head>
<body>
    <div id="app">
        <!-- 商品信息 -->
        <div class="item" v-for="(item, index) in items" :key="index">
            <input type="number" v-model="item.price" placeholder="商品价格">
            <select v-model="item.discount">
                <option value="1">不打折</option>
                <option value="0.8">八折</option>
                <option value="0.55">五五折</option>
            </select>
            <button @click="removeItem(index)">删除</button>
        </div>

        <!-- 操作按钮 -->
        <button @click="addItem">增加商品</button>
        <button @click="calculate">计算</button>

        <!-- 计算结果 -->
        <div v-if="showResults">
            <p>原价总计: {{ originalTotal.toFixed(2) }}</p>
            <p>折后总计: {{ discountedTotal.toFixed(2) }}</p>
            <p>满减: {{ discountAmount.toFixed(2) }}</p>
            <p>应付: {{ finalTotal.toFixed(2) }}</p>
            <p>距离下一次满600减100还差: {{ remainder.toFixed(2) }}</p>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.min.js"></script>
    <script>
        // JavaScript 代码
        new Vue({
            el: '#app',
            data: {
                items: [
                    { price: null, discount: 1 },
                ],
                showResults: false,
                originalTotal: 0,
                discountedTotal: 0,
                discountAmount: 0,
                finalTotal: 0,
                remainder: 0
            },
            methods: {
                addItem() {
                    this.items.push({ price: null, discount: 1 });
                },
                removeItem(index) {
                    this.items.splice(index, 1);
                },
                calculate() {
                    this.originalTotal = 0;
                    this.discountedTotal = 0;

                    for (let item of this.items) {
                        let price = parseFloat(item.price) || 0;
                        let discount = parseFloat(item.discount) || 1;
                        this.originalTotal += price;
                        this.discountedTotal += price * discount;
                    }

                    this.discountAmount = Math.floor(this.discountedTotal / 600) * 100;
                    this.finalTotal = this.discountedTotal - this.discountAmount;
                    this.remainder = 600 - (this.discountedTotal % 600);

                    this.showResults = true;
                }
            }
        });
    </script>
</body>
</html>
